[gd_scene load_steps=9 format=3 uid="uid://main_scene"]

[ext_resource type="Script" path="res://scripts/sim_controller.gd" id="1"]
[ext_resource type="Script" path="res://scripts/camera_controller.gd" id="2"]
[ext_resource type="Mesh" uid="uid://bs1k3d8myef7a" path="res://assets/terrain/peak.obj" id="3"]

[sub_resource type="SphereMesh" id="SphereMesh_bug"]
radius = 100.0
height = 200.0

[sub_resource type="StandardMaterial3D" id="Material_bug"]
albedo_color = Color(1.0, 0.2, 0.1, 1.0)
emission_enabled = true
emission = Color(1.0, 0.3, 0.1, 1.0)
emission_energy_multiplier = 2.0

[sub_resource type="ProceduralSkyMaterial" id="SkyMaterial_1"]
sky_top_color = Color(0.35, 0.55, 0.85, 1.0)
sky_horizon_color = Color(0.65, 0.75, 0.85, 1.0)
ground_bottom_color = Color(0.2, 0.17, 0.13, 1.0)
ground_horizon_color = Color(0.55, 0.55, 0.5, 1.0)

[sub_resource type="Sky" id="Sky_1"]
sky_material = SubResource("SkyMaterial_1")

[sub_resource type="Environment" id="Env_1"]
background_mode = 2
sky = SubResource("Sky_1")
ambient_light_source = 2
ambient_light_color = Color(0.8, 0.85, 1.0, 1.0)
ambient_light_sky_contribution = 0.8
ambient_light_energy = 0.6
tonemap_mode = 2
tonemap_white = 6.0

[node name="Main" type="Node3D"]
script = ExtResource("1")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.5, -0.866, 0, 0.866, 0.5, 0, 10000, 0)
light_energy = 1.8
light_color = Color(1.0, 0.95, 0.85, 1.0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Env_1")

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.766, 0.643, 0, -0.643, 0.766, 0, 8000, 12000)
far = 100000.0
script = ExtResource("2")

[node name="Terrain" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0, 1, 0, -1, 0, 0, 0, 0)
mesh = ExtResource("3")

[node name="Bug" type="BugNode" parent="."]
seed = 42
goal_heading = 2.356
speed = 1.0
kappa = 2.0
contrast = 0.15
sigma_theta = 0.1
sigma_xy = 0.05
steps_per_frame = 10

[node name="BugMesh" type="MeshInstance3D" parent="Bug"]
mesh = SubResource("SphereMesh_bug")
material_override = SubResource("Material_bug")
